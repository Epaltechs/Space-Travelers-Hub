{"version":3,"names":["FETCH_MISSIONS","FETCH_MISSIONS_SUCCESS","FETCH_MISSIONS_ERROR","MISSIONS_JOINED","MISSIONS_LEFT","appUrl","getMissions","dispatch","type","missions","fetch","myMissions","json","initialState","status","loading","error","populateMissions","missionArr","i","length","push","id","mission_id","name","mission_name","description","reserved","joinMission","payload","leaveMission","JoinedMissions","state","newState","map","mission","missionsLeft","missionReducer","action"],"sources":["missions.js"],"sourcesContent":["const FETCH_MISSIONS = 'missions/missionSlice/FETCH_MISSIONS';\r\nconst FETCH_MISSIONS_SUCCESS = 'missions/missionSlice/FETCH_MISSIONS_SUCCESS';\r\nconst FETCH_MISSIONS_ERROR = 'missions/missionSlice/FETCH_MISSIONS_ERROR';\r\nconst MISSIONS_JOINED = 'missions/missionSlice/MISSIONS_JOINED';\r\nconst MISSIONS_LEFT = 'missions/missionSlice/MISSIONS_LEFT';\r\n\r\nconst appUrl = 'https://api.spacexdata.com/v3/missions';\r\n\r\nexport const getMissions = () => async (dispatch) => {\r\n  dispatch({ type: FETCH_MISSIONS });\r\n  const missions = await fetch(appUrl);\r\n  const myMissions = await missions.json();\r\n  return dispatch({ type: FETCH_MISSIONS_SUCCESS, myMissions });\r\n};\r\n\r\nconst initialState = {\r\n  missions: [],\r\n  status: 'fetching',\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nconst populateMissions = (myMissions) => {\r\n  const missionArr = [];\r\n  for (let i = 0; i < myMissions.length; i += 1) {\r\n    missionArr.push({\r\n      id: myMissions[i].mission_id,\r\n      name: myMissions[i].mission_name,\r\n      description: myMissions[i].description,\r\n      reserved: false,\r\n    });\r\n  }\r\n  return missionArr;\r\n};\r\n\r\nexport const joinMission = (payload) => (\r\n  {\r\n    type: MISSIONS_JOINED,\r\n    payload,\r\n  }\r\n);\r\n\r\nexport const leaveMission = (payload) => (\r\n  {\r\n    type: MISSIONS_LEFT,\r\n    payload,\r\n  }\r\n);\r\n\r\nexport const JoinedMissions = (state, id) => {\r\n  const newState = state.map((mission) => {\r\n    if (mission.id !== id) {\r\n      return mission;\r\n    }\r\n    return { ...mission, reserved: true };\r\n  });\r\n  return newState;\r\n};\r\n\r\nexport const missionsLeft = (state, id) => {\r\n  const newState = state.map((mission) => {\r\n    if (mission.id !== id) {\r\n      return mission;\r\n    }\r\n    return { ...mission, reserved: false };\r\n  });\r\n  return newState;\r\n};\r\n\r\nconst missionReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_MISSIONS:\r\n      return { ...state, loading: true };\r\n    case FETCH_MISSIONS_SUCCESS:\r\n      populateMissions(action.myMissions);\r\n      return { ...state, loading: false, missions: populateMissions(action.myMissions) };\r\n    case FETCH_MISSIONS_ERROR:\r\n      return { ...state, loading: false, error: action.error };\r\n    case MISSIONS_JOINED:\r\n      return { ...state, missions: JoinedMissions(state.missions, action.payload) };\r\n    case MISSIONS_LEFT:\r\n      return { ...state, missions: missionsLeft(state.missions, action.payload) };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default missionReducer;\r\n"],"mappings":";;;;;;AAAA,MAAMA,cAAc,GAAG,sCAAvB;AACA,MAAMC,sBAAsB,GAAG,8CAA/B;AACA,MAAMC,oBAAoB,GAAG,4CAA7B;AACA,MAAMC,eAAe,GAAG,uCAAxB;AACA,MAAMC,aAAa,GAAG,qCAAtB;AAEA,MAAMC,MAAM,GAAG,wCAAf;;AAEO,MAAMC,WAAW,GAAG,MAAM,MAAOC,QAAP,IAAoB;EACnDA,QAAQ,CAAC;IAAEC,IAAI,EAAER;EAAR,CAAD,CAAR;EACA,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAACL,MAAD,CAA5B;EACA,MAAMM,UAAU,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAzB;EACA,OAAOL,QAAQ,CAAC;IAAEC,IAAI,EAAEP,sBAAR;IAAgCU;EAAhC,CAAD,CAAf;AACD,CALM;;;AAOP,MAAME,YAAY,GAAG;EACnBJ,QAAQ,EAAE,EADS;EAEnBK,MAAM,EAAE,UAFW;EAGnBC,OAAO,EAAE,KAHU;EAInBC,KAAK,EAAE;AAJY,CAArB;;AAOA,MAAMC,gBAAgB,GAAIN,UAAD,IAAgB;EACvC,MAAMO,UAAU,GAAG,EAAnB;;EACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,UAAU,CAACS,MAA/B,EAAuCD,CAAC,IAAI,CAA5C,EAA+C;IAC7CD,UAAU,CAACG,IAAX,CAAgB;MACdC,EAAE,EAAEX,UAAU,CAACQ,CAAD,CAAV,CAAcI,UADJ;MAEdC,IAAI,EAAEb,UAAU,CAACQ,CAAD,CAAV,CAAcM,YAFN;MAGdC,WAAW,EAAEf,UAAU,CAACQ,CAAD,CAAV,CAAcO,WAHb;MAIdC,QAAQ,EAAE;IAJI,CAAhB;EAMD;;EACD,OAAOT,UAAP;AACD,CAXD;;AAaO,MAAMU,WAAW,GAAIC,OAAD,KACzB;EACErB,IAAI,EAAEL,eADR;EAEE0B;AAFF,CADyB,CAApB;;;;AAOA,MAAMC,YAAY,GAAID,OAAD,KAC1B;EACErB,IAAI,EAAEJ,aADR;EAEEyB;AAFF,CAD0B,CAArB;;;;AAOA,MAAME,cAAc,GAAG,CAACC,KAAD,EAAQV,EAAR,KAAe;EAC3C,MAAMW,QAAQ,GAAGD,KAAK,CAACE,GAAN,CAAWC,OAAD,IAAa;IACtC,IAAIA,OAAO,CAACb,EAAR,KAAeA,EAAnB,EAAuB;MACrB,OAAOa,OAAP;IACD;;IACD,OAAO,EAAE,GAAGA,OAAL;MAAcR,QAAQ,EAAE;IAAxB,CAAP;EACD,CALgB,CAAjB;EAMA,OAAOM,QAAP;AACD,CARM;;;;AAUA,MAAMG,YAAY,GAAG,CAACJ,KAAD,EAAQV,EAAR,KAAe;EACzC,MAAMW,QAAQ,GAAGD,KAAK,CAACE,GAAN,CAAWC,OAAD,IAAa;IACtC,IAAIA,OAAO,CAACb,EAAR,KAAeA,EAAnB,EAAuB;MACrB,OAAOa,OAAP;IACD;;IACD,OAAO,EAAE,GAAGA,OAAL;MAAcR,QAAQ,EAAE;IAAxB,CAAP;EACD,CALgB,CAAjB;EAMA,OAAOM,QAAP;AACD,CARM;;;;AAUP,MAAMI,cAAc,GAAG,CAACL,KAAK,GAAGnB,YAAT,EAAuByB,MAAvB,KAAkC;EACvD,QAAQA,MAAM,CAAC9B,IAAf;IACE,KAAKR,cAAL;MACE,OAAO,EAAE,GAAGgC,KAAL;QAAYjB,OAAO,EAAE;MAArB,CAAP;;IACF,KAAKd,sBAAL;MACEgB,gBAAgB,CAACqB,MAAM,CAAC3B,UAAR,CAAhB;MACA,OAAO,EAAE,GAAGqB,KAAL;QAAYjB,OAAO,EAAE,KAArB;QAA4BN,QAAQ,EAAEQ,gBAAgB,CAACqB,MAAM,CAAC3B,UAAR;MAAtD,CAAP;;IACF,KAAKT,oBAAL;MACE,OAAO,EAAE,GAAG8B,KAAL;QAAYjB,OAAO,EAAE,KAArB;QAA4BC,KAAK,EAAEsB,MAAM,CAACtB;MAA1C,CAAP;;IACF,KAAKb,eAAL;MACE,OAAO,EAAE,GAAG6B,KAAL;QAAYvB,QAAQ,EAAEsB,cAAc,CAACC,KAAK,CAACvB,QAAP,EAAiB6B,MAAM,CAACT,OAAxB;MAApC,CAAP;;IACF,KAAKzB,aAAL;MACE,OAAO,EAAE,GAAG4B,KAAL;QAAYvB,QAAQ,EAAE2B,YAAY,CAACJ,KAAK,CAACvB,QAAP,EAAiB6B,MAAM,CAACT,OAAxB;MAAlC,CAAP;;IAEF;MACE,OAAOG,KAAP;EAdJ;AAgBD,CAjBD;;eAmBeK,c"}